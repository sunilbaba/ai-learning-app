<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FAANG Path</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0f172a">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Crect width='512' height='512' rx='120' fill='%230f172a'/%3E%3Cpath d='M256 120C180.9 120 120 180.9 120 256s60.9 136 136 136 136-60.9 136-136-60.9-136-136-136zm0 232c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z' fill='%23334155'/%3E%3Ccircle cx='256' cy='186' r='24' fill='%233b82f6'/%3E%3Ccircle cx='186' cy='296' r='24' fill='%2310b981'/%3E%3Ccircle cx='326' cy='296' r='24' fill='%238b5cf6'/%3E%3Cpath d='M256 186L186 296M256 186L326 296M186 296H326' stroke='white' stroke-width='12' stroke-linecap='round'/%3E%3C/svg%3E">

    <style>
        body { overscroll-behavior-y: contain; -webkit-tap-highlight-color: transparent; font-family: sans-serif; background-color: #f8fafc; }
        .pb-safe { padding-bottom: 100px; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS ---
        const Icon = ({ d, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d={d} />
            </svg>
        );

        const Icons = {
            Sun: () => <Icon className="w-4 h-4" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M16.95 17.657l.707.707M6.343 6.343l.707.707M12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8z" />,
            Moon: () => <Icon className="w-4 h-4" d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />,
            Play: () => <Icon className="w-4 h-4" d="M5 3l14 9-14 9V3z" />,
            Stop: () => <Icon className="w-4 h-4" d="M6 4h12v16H6z" />,
            Check: () => <Icon className="w-6 h-6" d="M20 6L9 17l-5-5" />,
            Left: () => <Icon className="w-5 h-5" d="M15 18l-6-6 6-6" />,
            Right: () => <Icon className="w-5 h-5" d="M9 18l6-6-6-6" />,
            Alarm: () => <Icon className="w-5 h-5" d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 0 1-3.46 0" />,
            Calendar: () => <Icon className="w-5 h-5" d="M19 4H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zM16 2v4M8 2v4M3 10h18" />
        };

        // --- DATA ---
        const curriculum = [
            {
                title: "Week 1: Linear Algebra",
                days: [
                    { d: "Mon", m: {t: "Vectors", l: "https://youtu.be/fNk_zzaMoSs", sum: "Vectors are arrays of numbers. They represent coordinates in space." }, e: {t: "Numpy Arrays", l: "https://jakevdp.github.io/PythonDataScienceHandbook/02.01-understanding-data-types.html", sum: "Numpy arrays are faster than lists. Use them for math operations."} },
                    { d: "Tue", m: {t: "Dot Products", l: "https://youtu.be/LyGKycYT2v0", sum: "Dot products measure similarity between two vectors." }, e: {t: "Numpy Math", l: "https://jakevdp.github.io/PythonDataScienceHandbook/02.03-computation-on-arrays-ufuncs.html", sum: "Use broadcasting to add numbers to arrays without loops."} },
                    { d: "Wed", m: {t: "Matrices", l: "https://youtu.be/kYB8IZa5AuE", sum: "Matrices transform space. They can rotate or stretch vectors." }, e: {t: "Pandas Basics", l: "https://jakevdp.github.io/PythonDataScienceHandbook/03.01-introducing-pandas-objects.html", sum: "Pandas DataFrames are like Excel sheets for Python code."} },
                    { d: "Thu", m: {t: "Determinants", l: "https://youtu.be/Ip3X9LOh2dk", sum: "Determinants tell you how much a matrix scales area." }, e: {t: "Data Selection", l: "https://jakevdp.github.io/PythonDataScienceHandbook/03.02-data-indexing-and-selection.html", sum: "Use .loc and .iloc to select rows and columns efficiently."} },
                    { d: "Fri", m: {t: "Eigenvectors", l: "https://youtu.be/PFDu9oVAE-g", sum: "Eigenvectors don't get knocked off their span during transformation." }, e: {t: "Missing Data", l: "https://jakevdp.github.io/PythonDataScienceHandbook/03.04-missing-values.html", sum: "Fill missing data (NaN) with mean or median values."} },
                    { d: "Sat", m: {t: "Review", l: "https://www.coursera.org/learn/machine-learning-linear-algebra", sum: "Review vectors, matrices, and dot products today." }, e: {t: "Practice", l: "https://kaggle.com", sum: "Try the Titanic dataset on Kaggle."} },
                ]
            },
            {
                title: "Week 2: Calculus",
                days: [
                    { d: "Mon", m: {t: "Derivatives", l: "https://youtu.be/WUvTyaaNkzM", sum: "Derivatives measure the rate of change or slope." }, e: {t: "Probability", l: "https://seeing-theory.brown.edu", sum: "Learn basic probability distributions."} },
                    { d: "Tue", m: {t: "Chain Rule", l: "https://youtu.be/YG15m2VwSjA", sum: "The chain rule helps find derivatives of nested functions." }, e: {t: "Distributions", l: "https://seeing-theory.brown.edu", sum: "Normal distribution is the bell curve."} },
                    { d: "Wed", m: {t: "Gradient Descent", l: "https://youtu.be/IHZwWFHWa-w", sum: "Gradient descent finds the minimum error." }, e: {t: "Bayes", l: "https://seeing-theory.brown.edu", sum: "Bayes theorem updates probabilities with new data."} },
                    { d: "Thu", m: {t: "Backprop", l: "https://youtu.be/tIeHLnjs5U8", sum: "Backprop calculates gradients for neural networks." }, e: {t: "Stats Code", l: "https://scikit-learn.org", sum: "Implement statistical tests in Python."} },
                    { d: "Fri", m: {t: "Multi-Calc", l: "https://khanacademy.org", sum: "Multivariate calculus deals with multiple variables." }, e: {t: "Variance", l: "https://scribbr.com", sum: "Variance measures data spread."} },
                    { d: "Sat", m: {t: "Review", l: "https://coursera.org", sum: "Review gradients and chain rule." }, e: {t: "Code GD", l: "https://towardsdatascience.com", sum: "Code a gradient descent loop from scratch."} },
                ]
            }
        ];

        function App() {
            const [weekIdx, setWeekIdx] = useState(() => {
                try { return parseInt(localStorage.getItem('faang_week')) || 0; } catch { return 0; }
            });
            const [dayIdx, setDayIdx] = useState(0);
            const [completed, setCompleted] = useState(() => {
                try { return JSON.parse(localStorage.getItem('faang_done')) || []; } catch { return []; }
            });
            const [speaking, setSpeaking] = useState(false);

            const currentWeek = curriculum[weekIdx] || curriculum[0];
            const currentDay = currentWeek.days[dayIdx] || currentWeek.days[0];
            const mId = `w${weekIdx}d${dayIdx}m`;
            const eId = `w${weekIdx}d${dayIdx}e`;

            // --- AUDIO ---
            const speak = (text) => {
                if (!window.speechSynthesis) return;
                window.speechSynthesis.cancel();
                if (speaking) { setSpeaking(false); return; }
                const u = new SpeechSynthesisUtterance(text);
                u.onend = () => setSpeaking(false);
                window.speechSynthesis.speak(u);
                setSpeaking(true);
            };

            // --- ANDROID DOWNLOAD SYNC ---
            const syncWeek = () => {
                const events = [];
                const now = new Date();
                
                // Start schedule from TODAY
                currentWeek.days.forEach((dayData, index) => {
                    const eventDate = new Date(now);
                    eventDate.setDate(now.getDate() + index);
                    
                    const fmt = (d, h) => {
                        const date = new Date(d);
                        date.setHours(h,0,0);
                        return date.toISOString().replace(/[-:]/g, "").split(".")[0] + "Z";
                    };

                    // Morning
                    events.push(`BEGIN:VEVENT\nSUMMARY:AI Study: ${dayData.m.t}\nDTSTART:${fmt(eventDate, 11)}\nDTEND:${fmt(eventDate, 13)}\nDESCRIPTION:Link: ${dayData.m.l}\nEND:VEVENT`);
                    // Evening
                    events.push(`BEGIN:VEVENT\nSUMMARY:AI Lab: ${dayData.e.t}\nDTSTART:${fmt(eventDate, 18)}\nDTEND:${fmt(eventDate, 20)}\nDESCRIPTION:Link: ${dayData.e.l}\nEND:VEVENT`);
                });

                const icsContent = `BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//FAANG AI//EN\n${events.join("\n")}\nEND:VCALENDAR`;
                
                // FORCE DOWNLOAD (Android Reliable Method)
                const element = document.createElement('a');
                const file = new Blob([icsContent], {type: 'text/calendar'});
                element.href = URL.createObjectURL(file);
                element.download = `FAANG_Week_${weekIdx + 1}.ics`;
                document.body.appendChild(element); // Required for this to work in FireFox
                element.click();
                document.body.removeChild(element);

                alert("File Downloaded! \n\n1. Tap 'Open' in your notifications.\n2. Select 'Google Calendar' to import all events.");
            };

            const toggle = (id) => {
                const next = completed.includes(id) ? completed.filter(x => x !== id) : [...completed, id];
                setCompleted(next);
                localStorage.setItem('faang_done', JSON.stringify(next));
            };

            useEffect(() => {
                localStorage.setItem('faang_week', weekIdx);
            }, [weekIdx]);

            // Google Calendar Direct Link (For single event fallback)
            const getDirectLink = (title, isMorning) => {
                 const now = new Date();
                 const h = isMorning ? 11 : 18;
                 // If today is past the time, assume tomorrow, otherwise today
                 if (now.getHours() >= h) now.setDate(now.getDate() + 1);
                 
                 now.setHours(h, 0, 0, 0);
                 const start = now.toISOString().replace(/[-:]/g, "").split(".")[0] + "Z";
                 const end = new Date(now.getTime() + 2 * 60 * 60 * 1000).toISOString().replace(/[-:]/g, "").split(".")[0] + "Z";
                 
                 return `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent("AI: " + title)}&dates=${start}/${end}`;
            };

            const progress = Math.round((completed.length / (curriculum.length * 12)) * 100) || 0;

            return (
                <div className="min-h-screen pb-safe">
                    {/* Header */}
                    <div className="bg-slate-900 text-white p-6 rounded-b-[2rem] shadow-xl sticky top-0 z-10">
                        <div className="flex justify-between items-center mb-4">
                            <div>
                                <h1 className="text-2xl font-bold text-blue-400">FAANG Path</h1>
                                <p className="text-xs text-slate-400">Progress: {progress}%</p>
                            </div>
                            
                            <div className="flex items-center gap-2 bg-slate-800 px-3 py-1 rounded-lg">
                                <button onClick={() => setWeekIdx(Math.max(0, weekIdx - 1))} disabled={weekIdx===0} className="disabled:opacity-30">←</button>
                                <span className="font-mono font-bold">W{weekIdx + 1}</span>
                                <button onClick={() => setWeekIdx(Math.min(curriculum.length-1, weekIdx + 1))} disabled={weekIdx===curriculum.length-1} className="disabled:opacity-30">→</button>
                            </div>
                        </div>

                        {/* SYNC BUTTON */}
                        <button onClick={syncWeek} className="w-full mb-4 bg-gradient-to-r from-blue-600 to-cyan-600 py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 shadow-lg active:scale-95 transition-transform">
                            <Icons.Calendar/> Download Week Schedule
                        </button>

                        {/* Day Tabs */}
                        <div className="flex gap-2 overflow-x-auto hide-scrollbar pb-1">
                            {currentWeek.days.map((d, i) => (
                                <button key={i} onClick={() => { setDayIdx(i); window.speechSynthesis.cancel(); setSpeaking(false); }} 
                                    className={`px-4 py-2 rounded-lg font-bold text-sm transition-all ${dayIdx === i ? 'bg-white text-slate-900' : 'bg-slate-800 text-slate-400'}`}>
                                    {d.d}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Content */}
                    <div className="p-5 space-y-6">
                        
                        {/* Morning */}
                        <div className={`bg-white p-5 rounded-2xl shadow-sm border-l-4 border-orange-400 ${completed.includes(mId) ? 'opacity-50' : ''}`}>
                            <div className="flex justify-between items-center mb-2">
                                <span className="text-xs font-bold text-orange-500 uppercase tracking-wider flex items-center gap-1"><Icons.Sun/> Morning</span>
                                <a href={getDirectLink(currentDay.m.t, true)} target="_blank" className="text-slate-300"><Icons.Alarm/></a>
                            </div>
                            <h2 className="text-lg font-bold text-slate-800 mb-1">{currentDay.m.t}</h2>
                            
                            <div className="flex gap-2 mt-4">
                                <button onClick={() => speak(currentDay.m.sum)} className={`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-sm font-bold border ${speaking ? 'bg-orange-50 border-orange-200 text-orange-600' : 'bg-white border-slate-200 text-slate-600'}`}>
                                    {speaking ? <Icons.Stop/> : <Icons.Play/>} Audio
                                </button>
                                <a href={currentDay.m.l} target="_blank" className="flex-1 py-2 bg-orange-50 text-orange-600 rounded-lg flex items-center justify-center gap-2 text-sm font-bold">
                                    View
                                </a>
                                <button onClick={() => toggle(mId)} className={`w-10 rounded-lg border-2 flex items-center justify-center ${completed.includes(mId) ? 'bg-green-500 border-green-500 text-white' : 'border-slate-200 text-slate-300'}`}>
                                    <Icons.Check/>
                                </button>
                            </div>
                        </div>

                        {/* Evening */}
                        <div className={`bg-white p-5 rounded-2xl shadow-sm border-l-4 border-indigo-500 ${completed.includes(eId) ? 'opacity-50' : ''}`}>
                            <div className="flex justify-between items-center mb-2">
                                <span className="text-xs font-bold text-indigo-500 uppercase tracking-wider flex items-center gap-1"><Icons.Moon/> Evening</span>
                                <a href={getDirectLink(currentDay.e.t, false)} target="_blank" className="text-slate-300"><Icons.Alarm/></a>
                            </div>
                            <h2 className="text-lg font-bold text-slate-800 mb-1">{currentDay.e.t}</h2>
                            
                            <div className="flex gap-2 mt-4">
                                <button onClick={() => speak(currentDay.e.sum)} className="flex-1 py-2 bg-white text-slate-600 border border-slate-200 rounded-lg flex items-center justify-center gap-2 text-sm font-bold">
                                    <Icons.Play/> Audio
                                </button>
                                <a href={currentDay.e.l} target="_blank" className="flex-1 py-2 bg-indigo-50 text-indigo-600 rounded-lg flex items-center justify-center gap-2 text-sm font-bold">
                                    Read
                                </a>
                                <button onClick={() => toggle(eId)} className={`w-10 rounded-lg border-2 flex items-center justify-center ${completed.includes(eId) ? 'bg-green-500 border-green-500 text-white' : 'border-slate-200 text-slate-300'}`}>
                                    <Icons.Check/>
                                </button>
                            </div>
                        </div>

                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

